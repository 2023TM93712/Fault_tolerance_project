<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>InfraSense – Sensor Console</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="style.css" />
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="body-dashboard">
  <!-- Top bar -->
  <header class="topbar">
    <div class="topbar-left">
      <div class="app-logo">InfraSense</div>
      <div class="app-subtitle">Industrial Condition Monitoring</div>
    </div>
    <div class="topbar-right">
      <div class="user-pill">
        <span id="header-username">user</span>
        <span id="header-role" class="pill pill-secondary">user</span>
      </div>
      <button id="btn-logout" class="btn btn-ghost">Logout</button>
    </div>
  </header>

  <!-- Main layout -->
  <main class="layout">
    <!-- LEFT: Sensors + controls -->
    <section class="panel panel-left">
      <div class="panel-header">
        <div class="panel-title-row">
          <h2>All Sensors</h2>
          <div class="panel-header-right">
            <button id="btn-refresh" class="btn btn-small">Refresh</button>
          </div>
        </div>
        <div id="sensor-count" class="panel-subtitle">0 sensors</div>
      </div>

      <div id="sensor-error" class="alert alert-error" style="display:none;">
        Failed to load sensors. Check gateway service.
      </div>

      <div id="sensor-list" class="sensor-list">
        <!-- sensor cards will be injected here -->
      </div>

      <!-- Commands -->
      <div class="panel panel-commands">
        <div class="panel-header">
          <h3>Sensor Control</h3>
          <div id="selected-sensor-label" class="panel-subtitle">
            No sensor selected
          </div>
        </div>
        <div class="command-row">
          <button id="btn-commission" class="btn btn-primary" disabled>
            Commission
          </button>
          <button id="btn-decommission" class="btn btn-outline" disabled>
            Decommission
          </button>
        </div>
        <div class="command-row">
          <button id="btn-recover" class="btn btn-outline" disabled>
            Recover
          </button>
          <button id="btn-fault" class="btn btn-danger" disabled>
            Inject Fault
          </button>
        </div>
        <div class="command-row">
          <button id="btn-test-alert" class="btn btn-outline" disabled>
            Test Alert
          </button>
        </div>
        <div id="command-status" class="command-status"></div>
      </div>
    </section>

    <!-- RIGHT: Charts + summary -->
    <section class="panel panel-right">
      <!-- Summary strip -->
      <div class="summary-strip">
        <div class="summary-card">
          <div class="summary-label">Active sensors</div>
          <div id="summary-active" class="summary-value">-</div>
        </div>
        <div class="summary-card">
          <div class="summary-label">Faults</div>
          <div id="summary-faults" class="summary-value summary-value-warn">-</div>
        </div>
        <div class="summary-card">
          <div class="summary-label">Latest temperature</div>
          <div id="summary-temp" class="summary-value">-</div>
        </div>
        <div class="summary-card">
          <div class="summary-label">Latest battery</div>
          <div id="summary-batt" class="summary-value">-</div>
        </div>
      </div>

      <!-- Chart area (landscape) -->
      <div class="panel-header">
        <div class="panel-title-row">
          <h2>Sensor Telemetry</h2>
        </div>
        <div id="chart-sensor-label" class="panel-subtitle">
          Select a sensor to view data
        </div>
      </div>

      <div id="chart-info" class="chart-info">
        <!-- dynamic text about commissioned / not commissioned -->
      </div>

      <div class="chart-grid">
        <div class="chart-card">
          <div class="chart-title-row">
            <span>Temperature (°C)</span>
          </div>
          <div class="chart-body">
            <canvas id="tempChart"></canvas>
          </div>
        </div>

        <div class="chart-card">
          <div class="chart-title-row">
            <span>Vibration</span>
          </div>
          <div class="chart-body">
            <canvas id="vibChart"></canvas>
          </div>
        </div>

        <div class="chart-card">
          <div class="chart-title-row">
            <span>Battery (%)</span>
          </div>
          <div class="chart-body">
            <canvas id="battChart"></canvas>
          </div>
        </div>
      </div>

      <div class="chart-footer-note">
        Data refreshes when you select a sensor or hit Refresh.
      </div>
    </section>
  </main>

  <script src="app.js"></script>
</body>
</html>
